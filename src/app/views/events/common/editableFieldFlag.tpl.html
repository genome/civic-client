<div class="editableFieldFlag" ng-class="{'state-open': flag.state === 'open', 'state-resolved': flag.state === 'resolved'}">
  <div class="flag-block" >
    <div class="row" >
      <div class="col-xs-12">
        <div class="actions-list" >
          <ul>
            <li>
              <span class="action-label">Flagged:</span> <user-block user="ctrl.actions.flagged.user"></user-block>
            </li>
            <li ng-if="ctrl.actions.resolved">
              <span class="action-label" >Resolved:</span> <user-block user="ctrl.actions.resolved.user"></user-block>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row" >
      <div class="col-xs-12" >
        <div class="flag-comment" >
          <span class="flag-comment-notice">Flagged comment:</span><br/>
          <p>{{ flag.flagComment.text }}</p>
        </div>
      </div>
    </div>
    <div class="row" ng-if="flag.resolveComment">
      <div class="col-xs-12" >
        <div class="resolve-comment" >
          <span class="flag-comment-notice">Resolved comment:</span><br/>
          <p>{{ flag.resolveComment.text }}</p>
        </div>
      </div>
    </div>
    <div class="resolve-flag-form" ng-if="flag.state ==='open' && (ctrl.isEditor() || ctrl.isAdmin())">
      <div class="row" >
        <div class="col-xs-12" >
          <div class="form-group">
            <textarea ng-model="ctrl.resolveFlag.comment.text" class="form-control resolve-comment" rows="3"
              placeholder="To resolve this flag, describe here how it was addressed then click 'Resolve'."></textarea>
          </div>
        </div>
      </div>
      <div class="row" >
        <div class="col-xs-12" >
          <span ng-if="ctrl.showCoiNotice">
            <a ui-sref="account.profile" class="btn btn-danger btn-block btn-xs">
              <i class="glyphicon glyphicon-hand-up"></i>&nbsp;
              Please Update COI Statement to resolve flag.
            </a>
          </span>
          <button type="submit"
            ng-if="!ctrl.showCoiNotice"
            class="btn btn-xs btn-success"
            ng-click="resolveFn(ctrl.resolveFlag)"
            ng-disabled="ctrl.resolveFlag.comment.text.length < 3"
            tooltip-enable="ctrl.resolveFlag.comment.text.length < 3"
            tooltip="Please add comment before resolving flag.">
            Resolve
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
